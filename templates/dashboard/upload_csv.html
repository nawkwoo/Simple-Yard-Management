{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>CSV 파일 업로드 - Yard Management System</title>
   <!-- Font Awesome CSS -->
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
   <style>
       body {
           font-family: Arial, sans-serif;
           background: linear-gradient(135deg, #e0e7ff, #f8fafc);
           margin: 0;
           padding: 0;
           min-height: 100vh;
           display: flex;
           align-items: center;
           justify-content: center;
           color: rgb(64, 68, 73);
           overflow-x: hidden;
       }

       .logo {
           position: absolute;
           top: 2rem;
           left: 50%;
           transform: translateX(-50%);
           font-size: 1.5rem;
           font-weight: 800;
           color: rgb(64, 68, 73);
           z-index: 2;
           letter-spacing: -0.5px;
           background: rgba(240, 240, 240, 0.85);
           padding: 1rem 2rem;
           border-radius: 12px;
           backdrop-filter: blur(8px);
           box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
       }

       .container {
           width: 100%;
           max-width: 600px;
           background: white;
           padding: 2.5rem;
           border-radius: 15px;
           box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
           margin: 4rem auto 2rem auto; /* 상단 여백 증가 */
       }

       h1 {
           color: #4f46e5;
           margin: 0 0 2rem 0;
           font-size: 2rem;
           text-align: center;
       }

       .upload-area {
           border: 2px dashed #4f46e5;
           border-radius: 10px;
           padding: 2rem;
           text-align: center;
           margin-bottom: 2rem;
           cursor: pointer;
           transition: all 0.3s ease;
           width: 100%;
           box-sizing: border-box;
       }

       .upload-area:hover {
           background: #f8fafc;
           border-color: #4338ca;
       }

       .upload-icon {
           font-size: 3rem;
           color: #4f46e5;
           margin-bottom: 1rem;
       }

       .file-input {
           display: none;
       }

       .file-label {
           color: #6b7280;
           margin-bottom: 1rem;
           display: block;
       }

       .selected-file {
           margin-top: 1rem;
           color: #4f46e5;
           font-weight: 600;
           display: none;
       }

       .btn {
           width: 100%;
           padding: 1rem 2rem;
           border-radius: 8px;
           border: none;
           font-size: 16px;
           font-weight: 600;
           cursor: pointer;
           text-decoration: none;
           transition: all 0.3s ease;
           display: inline-flex;
           align-items: center;
           justify-content: center;
           gap: 8px;
           margin-bottom: 1rem;
           box-sizing: border-box;
           background: #4f46e5;
           color: white;
       }

       .btn:hover {
           background: #4338ca;
           transform: translateY(-2px);
       }

       .btn-secondary {
           background: #6b7280;
           color: white;
       }

       .btn-secondary:hover {
           background: #4b5563;
           transform: translateY(-2px);
       }

       .button-container {
           width: 100%;
           margin: 1rem 0;
       }

       a.btn {
           display: inline-flex;
           text-align: center;
           text-decoration: none;
       }

       .message {
           text-align: center;
           padding: 1rem;
           border-radius: 8px;
           margin: 1rem 0;
       }

       .message.info {
           background: #e0e7ff;
           color: #4f46e5;
       }

       .message.error {
           background: #fee2e2;
           color: #dc2626;
       }

       .requirements {
           margin-top: 2rem;
           padding: 1rem;
           background: #f8fafc;
           border-radius: 8px;
       }

       .requirements h3 {
           color: #4f46e5;
           margin-top: 0;
           font-size: 1rem;
           display: flex;
           align-items: center;
           gap: 0.5rem;
       }

       .requirements ul {
           color: #6b7280;
           font-size: 0.9rem;
           margin: 0;
           padding-left: 1.5rem;
       }

       /* 반응형 디자인 */
       @media (max-width: 768px) {
           .container {
               padding: 2rem;
               margin: 2rem auto 1rem auto;
           }

           h1 {
               font-size: 1.5rem;
           }

           .upload-icon {
               font-size: 2.5rem;
               margin-bottom: 1.5rem;
           }

           .btn {
               padding: 10px 20px;
               font-size: 0.9rem;
           }

           .requirements h3 {
               font-size: 0.9rem;
           }
       }
   </style>
</head>
<body>
   <div class="logo">Yard Management System</div>
   <div class="container">
       <h1>CSV 파일 업로드</h1>

       <form method="post" enctype="multipart/form-data" id="upload-form">
           {% csrf_token %}
           <div class="upload-area" id="upload-area">
               <i class="fas fa-cloud-upload-alt upload-icon"></i>
               <p class="file-label">CSV 파일을 드래그하거나 클릭하여 업로드하세요</p>
               <input type="file" name="csv_file" accept=".csv" required 
                      class="file-input" id="file-input">
               <p class="selected-file" id="selected-file"></p>
           </div>

           <div class="button-container">
               <button type="submit" class="btn">
                   <i class="fas fa-upload"></i>
                   업로드
               </button>
           </div>
       </form>

       {% for message in messages %}
           <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
               {{ message }}
           </div>
       {% endfor %}

       <div class="button-container">
           <a href="{% url 'dashboard:order_list' %}" class="btn btn-secondary">
               <i class="fas fa-arrow-left"></i>
               주문 목록으로 돌아가기
           </a>
       </div>

       <div class="requirements">
           <h3><i class="fas fa-info-circle"></i> CSV 파일 요구사항</h3>
           <ul>
               <li>파일은 CSV 형식이어야 합니다.</li>
               <li>필수 열: 트럭, 샤시, 컨테이너, 트레일러, 운전자, 출발시간, 도착시간, 출발위치, 도착위치</li>
               <li>날짜 형식: YYYY-MM-DD HH:MM:SS</li>
           </ul>
       </div>
   </div>

   <script>
       const uploadArea = document.getElementById('upload-area');
       const fileInput = document.getElementById('file-input');
       const selectedFile = document.getElementById('selected-file');

       uploadArea.addEventListener('click', () => fileInput.click());

       uploadArea.addEventListener('dragover', (e) => {
           e.preventDefault();
           uploadArea.style.background = '#f8fafc';
       });

       uploadArea.addEventListener('dragleave', () => {
           uploadArea.style.background = 'white';
       });

       uploadArea.addEventListener('drop', (e) => {
           e.preventDefault();
           uploadArea.style.background = 'white';
           fileInput.files = e.dataTransfer.files;
           updateFileName();
       });

       fileInput.addEventListener('change', updateFileName);

       function updateFileName() {
           if (fileInput.files.length > 0) {
               selectedFile.textContent = `선택된 파일: ${fileInput.files[0].name}`;
               selectedFile.style.display = 'block';
           } else {
               selectedFile.style.display = 'none';
           }
       }
   </script>
</body>
</html>
